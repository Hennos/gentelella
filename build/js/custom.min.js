"use strict";function countChecked(){"all"===checkState&&$(".bulk_action input[name='table_records']").iCheck("check"),"none"===checkState&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var e=$(".bulk_action input[name='table_records']:checked").length;e?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(e+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}function _initDataTables(){if(console.log("run_datatables"),"undefined"!=typeof $.fn.DataTable){console.log("init_DataTables");var e=function(){$("#datatable-buttons").length&&$("#datatable-buttons").DataTable({dom:"Blfrtip",buttons:[{extend:"copy",className:"btn-sm"},{extend:"csv",className:"btn-sm"},{extend:"excel",className:"btn-sm"},{extend:"pdfHtml5",className:"btn-sm"},{extend:"print",className:"btn-sm"}],responsive:!0})},t=function(){return{init:function(){e()}}}();$("#datatable").dataTable(),$("#datatable-keytable").DataTable({keys:!0}),$("#datatable-responsive").DataTable(),$("#datatable-scroller").DataTable({ajax:"js/datatables/json/scroller-demo.json",deferRender:!0,scrollY:380,scrollCollapse:!0,scroller:!0}),$("#datatable-fixed-header").DataTable({fixedHeader:!0});var n=$("#datatable-checkbox");n.dataTable({order:[[1,"asc"]],columnDefs:[{orderable:!1,targets:[0]}]}),n.on("draw.dt",function(){$("checkbox input").iCheck({checkboxClass:"icheckbox_flat-green"})}),t.init()}}function _initDocumentTemplatesTable(){"undefined"!=typeof $.fn.DataTable&&($("#datatable-document-templates").DataTable({initComplete:function(){this.api().columns().every(function(){var e=this,t=$('<select><option value=""></option></select>').appendTo($(e.footer()).empty()).on("change",function(){var t=$.fn.dataTable.util.escapeRegex($(this).val());e.search(t?"^"+t+"$":"",!0,!1).draw()});e.data().unique().sort().each(function(e,n){t.append('<option value="'+e+'">'+e+"</option>")})})},columns:[{width:"35%"},{width:"30%"},{width:"30%"},{orderable:!1}],language:{lengthMenu:"Показать _MENU_ элементов на странице",zeroRecords:"Не найдено шаблонов документов",info:"Показать _PAGE_ из _PAGES_ страниц",infoEmpty:"Нет доступных шаблонов",search:"Поиск:",paginate:{first:"Первая",last:"Последняя",next:"Следующая",previous:"Предыдущая"},infoFiltered:""}}),console.log("_initDocumentTemplatesTable"))}function _initDocumentTemplates(){function e(e,t){return{tag:e,className:t}}function t(t){return Object.assign(e("p",r),{content:t})}function n(t){return Object.assign(e("div",u),{content:[]})}function a(a,i){return Object.assign(e("div",l),{content:[t(a),n(i)]})}function i(t){return Object.assign(e("div",s),{content:t.map(function(e){var t=e.type,n=e.templates;return a(t,n)})})}function c(e){var t=e.tag,n=e.className,a=document.createElement(t);switch(a.className=n,t){case"img":var i=e.src;a.src=i}var o=e.content||null;return Array.isArray(o)?o.forEach(function(e){return a.appendChild(c(e))}):"string"==typeof o&&(a.innerHTML=o),a}var o="container-document-templates",s="document-templates-area",l="document-templates-group",r="templates-group-header",u="templates-group-content",d=[{name:"Принятие на работу",type:"Заявление"},{name:"Отпуск",type:"Заявление"},{name:"Отзыв из отпуска",type:"Заявление"},{name:"Увольнение",type:"Заявление"},{name:"Приём в аспирантуру",type:"Заявление"},{name:"Академический отпуск",type:"Заявление"},{name:"Отчисление из аспирантуры",type:"Заявление"},{name:"Оплата расходов",type:"Заявление"},{name:"Выплата премии за статью",type:"Заявление"},{name:"Перевод с должности на должность",type:"Заявление"},{name:"Направление в командировку",type:"Служебная запискa"},{name:"Подготовка справок",type:"Служебная запискa"},{name:"Замена лампочек",type:"Служебная запискa"},{name:"Создание ящиков электронной почты",type:"Служебная запискa"},{name:"Назначение ответственным исполнителем по проекту",type:"Служебная запискa"},{name:"Выплаты по проектам",type:"Служебная запискa"},{name:"Надбавки по бюджету",type:"Служебная запискa"},{name:"Служебная записка в свободной форме",type:"Служебная запискa"},{name:"Авансовый отчёт по командировке",type:"Отчёт"},{name:"Финансовый отчёт по командировке",type:"Отчёт"},{name:"Отчёт о заграничной командировке",type:"Отчёт"},{name:"Бланк СПИИРАН",type:"Бланк"},{name:"Бланк презентации",type:"Бланк"}],p=(document.getElementById(o),d.map(function(e){return e.type}).reduce(function(e,t){return e.includes(t)?e:e.concat(t)},[]).map(function(e){return{type:e,templates:d.filter(function(t){return t.type===e}).map(function(e){return e.name})}}));console.dir(p),console.log(c(i(p)))}!function(e,t){var n=function(e,t,n){var a;return function(){function i(){n||e.apply(c,o),a=null}var c=this,o=arguments;a?clearTimeout(a):n&&e.apply(c,o),a=setTimeout(i,t||100)}};jQuery.fn[t]=function(e){return e?this.bind("resize",n(e)):this.trigger(t)}}(jQuery,"smartresize");var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");$(document).ready(function(){var e=function(){$RIGHT_COL.css("min-height",$(window).height());var e=$BODY.outerHeight(),t=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),n=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),a=e<n?n:e;a-=$NAV_MENU.height()+t,$RIGHT_COL.css("min-height",a)};$SIDEBAR_MENU.find("a").on("click",function(t){var n=$(this).parent();n.is(".active")?(n.removeClass("active active-sm"),$("ul:first",n).slideUp(function(){e()})):(n.parent().is(".child_menu")||($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),n.addClass("active"),$("ul:first",n).slideDown(function(){e()}))}),$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")),$BODY.toggleClass("nav-md nav-sm"),e(),$(".dataTable").each(function(){$(this).dataTable().fnDraw()})}),$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page"),$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){e()}).parent().addClass("active"),$(window).smartresize(function(){e()}),e(),$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})}),$(document).ready(function(){$(".collapse-link").on("click",function(){var e=$(this).closest(".x_panel"),t=$(this).find("i"),n=e.find(".x_content");e.attr("style")?n.slideToggle(200,function(){e.removeAttr("style")}):(n.slideToggle(200),e.css("height","auto")),t.toggleClass("fa-chevron-up fa-chevron-down")}),$(".close-link").click(function(){var e=$(this).closest(".x_panel");e.remove()})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})}),$(document).ready(function(){$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar()}),$(document).ready(function(){if($(".js-switch")[0]){var e=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));e.forEach(function(e){new Switchery(e,{color:"#26B99A"})})}}),$(document).ready(function(){$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}),$("table input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$("table input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$(".bulk_action input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()}),$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all",countChecked()}),$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none",countChecked()}),$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200),$expand=$(this).find(">:first-child"),"+"==$expand.text()?$expand.text("-"):$expand.text("+")})}),"undefined"!=typeof NProgress&&($(document).ready(function(){NProgress.start()}),$(window).on("load",function(){NProgress.done()})),$("document").ready(function(){_initDataTables(),_initDocumentTemplatesTable()}),$("document").ready(function(){_initDocumentTemplates()});